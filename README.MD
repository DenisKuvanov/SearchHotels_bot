# Поиск отелей в Telegram

Этот бот позволяет быстро подбирать отели прямо в мессенджере Telegram по различным критериям поиска. 


## Особенности

Данный бот позволяет:
* подбирать топ отелей по самой низкой цене;
* подбирать топ отелей по самой высокой цене;
* подбирать топ отелей по лучшему соотношению цена/расстояние от центра города;  
* задавать количество выводимых отелей;
* задавать вывод фотографий каждого отеля;
* задавать диапазон цен.
* бот не использует и не запрашивает никакие персональные данные.


## Requirements

* Python 3.10+
* [pyTelegramBotAPI](https://github.com/python-telegram-bot/python-telegram-bot) – Python Telegram Bot API
* [requests](https://github.com/psf/requests) - библиотека requests
* [redis](https://redis.io/) - хранилище поисковых параметров каждого пользователя

Чтобы установить все нужные пакеты, выполните следующую команду: `pip install -r requirements.txt`

## Логирование

Для логирования бота используется модуль [loguru](https://github.com/Delgan/loguru). 
Параметры логирования можно настроить, отредактировав `logger_config`:

```python
from loguru import logger
logger_config = {
    "handlers": [
        {
            "sink": "logs/bot.log",
            "format": "{time:YYYY-MM-DD at HH:mm:ss Z} | {level} | {message}",
            "encoding": "utf-8",
            "level": "DEBUG",
            "rotation": "10 MB",
            "compression": "zip"
        },
    ],
}
```

## Команды бота

* `/start` - запуск бота, выполняется автоматически при подключении к боту.
* `/help` - список команд и их описание
* `/lowprice` - топ дешевых отелей
* `/highprice` - топ дорогих отелей
* `/bestdeal` - лучшие предложения по цене и расположению 
* `/history` - истиория поиска отелей

## Как работать с ботом Hoteline

Список всех команд, поддерживаемых ботом, можно посмотреть по команде `/help`
Далее приведена инструкция по работе с ботом. При ошибочном вводе бот выведет соответствующее сообщение и попросит ввести значение повторно.

### Топ дешевых отелей

1. Введите команду `/lowprice`. Бот запросит город, в котором вы хотите искать отели.
2. Введите название населенного пункта. Бот выполнит запрос к hotels api и выведет список локаций, названия которых похожи на введенный город. 
   Если бот не найдет ни одну локацию, то необходимо ввести название города еще раз, возможно допущена ошибка при написании.
3. Выберите один из предложенных вариантов, наиболее подходящих вашему запросу.
4. Бот попросит ввести дату заезда и выезда из отеля в определённом формате. Введите даты.
5. Бот запросит количество отелей, которые вы хотите вывести в качестве результата. Введите количество отелей.
6. Бот запросит количесво фото, которые нужно вывести для каждого отеля. Если фото не нужны, то введите 0.
7. Бот выполнит следующий запрос к hotels api и выведет список отелей с указанием названия, расстояния до центра города, цены за сутки, итоговой цены и URL-адреса отеля.


### Топ дорогих отелей

1. Для получения списка самых дорогих отелей введите команду `/highprice`.
2. Пока в разработке

### Лучшие предложения

1. Введите команду `/bestdeal`. 
2. В разработке

### История поиска

1. Введите команду `/history`. 
2. В разработке

